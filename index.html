<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Azy IA ‚Äî Assistente Multimodal</title>
<style>
:root{--bg1:#ffeef8;--bg2:#e9e0ff;--accent:#ff4da6;--text:#222}
body{margin:0;font-family:Inter,Arial,system-ui;background:linear-gradient(135deg,var(--bg1),var(--bg2));color:var(--text);min-height:100vh;display:flex;flex-direction:column}
header{padding:18px;text-align:center;font-weight:700;font-size:20px}
.container{max-width:1000px;margin:12px auto;display:flex;gap:12px;padding:0 12px;flex-direction:column}
.panel{background:rgba(255,255,255,0.95);border-radius:12px;padding:12px;box-shadow:0 6px 16px rgba(0,0,0,0.06)}
#chat{height:54vh;overflow:auto;padding:12px;border-radius:8px;background:#fff}
.msg{margin-bottom:12px;padding:10px;border-radius:10px;max-width:80%}
.msg.user{margin-left:auto;background:var(--accent);color:#fff}
.msg.bot{background:#f4f4f6;color:#111}
.controls{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:10px}
input[type="text"]{flex:1;padding:10px;border-radius:8px;border:1px solid #eee}
button{background:var(--accent);color:#fff;padding:10px 14px;border:none;border-radius:8px;cursor:pointer}
.small{font-size:13px;color:#666}
.leftcol{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
@media(min-width:900px){ .container{flex-direction:row} .leftcol{flex-direction:column;width:320px}}
</style>
</head>
<body>
<header>üå∏ Azy IA ‚Äî Assistente Multimodal (Texto ‚Ä¢ Imagem ‚Ä¢ V√≠deo ‚Ä¢ Voz)</header>
<div class="container">
  <div class="panel leftcol">
    <div class="small">Idioma</div>
    <select id="lang">
      <option value="auto">Detectar automaticamente</option>
      <option value="pt">Portugu√™s</option>
      <option value="es">Espa√±ol</option>
      <option value="en">English</option>
      <option value="fr">Fran√ßais</option>
    </select>

    <div class="small" style="margin-top:8px">Voz</div>
    <select id="voice">
      <option value="female_1">Female 1</option>
      <option value="female_2">Female 2</option>
      <option value="male_1">Male 1</option>
      <option value="neutral_1">Neutral</option>
    </select>

    <div class="small" style="margin-top:8px">Upload (imagem/v√≠deo)</div>
    <input id="file" type="file" accept="image/*,video/*"/>

    <div class="controls" style="margin-top:8px">
      <button onclick="action('chat')">Enviar Chat</button>
      <button onclick="action('image')">Gerar Imagem</button>
      <button onclick="action('video')">Gerar V√≠deo</button>
      <button onclick="action('tts')">Gerar √Åudio</button>
    </div>
    <div class="small">Obs: gera√ß√£o de m√≠dia exige chaves externas (OpenAI, ElevenLabs, Runway, Pika).</div>
  </div>

  <div class="panel" style="flex:1;display:flex;flex-direction:column">
    <div id="chat"></div>
    <div style="display:flex;gap:8px;margin-top:8px">
      <input id="text" type="text" placeholder="Escreva algo..." />
      <button onclick="send()">Enviar</button>
    </div>
  </div>
</div>

<script>
const chat = document.getElementById('chat');
function addMsg(txt,who='bot'){ const d=document.createElement('div'); d.className='msg '+(who==='user'?'user':'bot'); d.innerText=txt; chat.appendChild(d); chat.scrollTop=chat.scrollHeight; }
async function send(){ const t=document.getElementById('text').value.trim(); if(!t) return; addMsg(t,'user'); document.getElementById('text').value=''; await callServer({action:'chat',message:t,lang:document.getElementById('lang').value,voice:document.getElementById('voice').value}); }
async function action(action){ const t=document.getElementById('text').value.trim(); const f=document.getElementById('file').files[0]||null; addMsg('('+action+')','user'); await callServer({action, message:t, lang:document.getElementById('lang').value, voice:document.getElementById('voice').value}, f); }
async function callServer(payload, file=null){ const form=new FormData(); form.append('payload', JSON.stringify(payload)); if(file) form.append('file', file); try{ const res=await fetch('/api/chat', {method:'POST', body: form}); const data=await res.json(); if(data.error) addMsg('Erro: '+data.error); else { if(data.reply) addMsg(data.reply,'bot'); if(data.imageUrl) addMsg('Imagem: '+data.imageUrl); if(data.videoUrl) addMsg('V√≠deo: '+data.videoUrl); if(data.ttsUrl){ addMsg('√Åudio pronto ‚Äî tocando...'); const a=new Audio(data.ttsUrl); a.play(); } } }catch(e){ addMsg('Erro de rede: '+e.message);} }
</script>
</body>
</html>
